<script>

  "use strict";

  let numeroDeFamiliares;


  /**
   * Função que configura a página do bolsa moradia
   */
  function configurarPaginaBolsaMoradia() {

    // Configura o Título da Página
    document.getElementById( "tituloPagina" ).innerHTML = "BOLSA MORADIA - FORMULÁRIO DE ENCAMINHAMENTO";

    // Reset no número de familiares
    numeroDeFamiliares = 0;

  } // Fim da função configurarPaginaBolsaMoradia


  /**
   * Função para mostrar os campos referentes às opções
   * selecionadas no checkbox tipoTrabalhoCheckbox
   */
  function mostrarCamposTrabalho() {
    
    // Reset nos displays dos campos
    document.getElementById( "docTrabalhoFormal" ).style.display = "none";
    document.getElementById( "descricaoTrabalhoInformal" ).style.display = "none";
    
    // Ids dos tipos de trabalhos selecionados no checkbox tipoTrabalhoCheckbox      
    const tipoTrabalhoCheckbox = document.querySelectorAll('input[name="tipoTrabalhoCheckbox"]:checked');
    const arrayIdsTipoTrabalho = Array.from(tipoTrabalhoCheckbox).map(chk => chk.value);

    // Se algum checkbox dos tipos de trabalhos tiver sido selecionado
    if( arrayIdsTipoTrabalho.length ) {

      arrayIdsTipoTrabalho.forEach( item => {
        
        if(item == "4") document.getElementById( "docTrabalhoFormal" ).style.display = "";
        if(item == "5") document.getElementById( "descricaoTrabalhoInformal" ).style.display = "";

      }); 
    }

  } // Fim da função mostrarCamposTrabalho


  /**
   * Função para mostrar o campo referente à opção
   * selecionada no checkbox estamosJuntosCheckbox
   */
  function mostrarCampoEstamosJuntos() {
    
    // Reset nos displays dos campos
    document.getElementById( "docEstamosJuntos" ).style.display = "none";    
    
    // Ids dos tipos de trabalhos selecionados no checkbox tipoTrabalhoCheckbox      
    const estamosJuntosCheckbox = document.querySelectorAll('input[name="estamosJuntosCheckbox"]:checked');
    const arrayIdsEstamosJuntos = Array.from(estamosJuntosCheckbox).map(chk => chk.value);

    // Se algum checkbox dos tipos de trabalhos tiver sido selecionado
    if( arrayIdsEstamosJuntos.length ) {

      arrayIdsEstamosJuntos.forEach( item => {
        
        if(item == "1") document.getElementById( "docEstamosJuntos" ).style.display = "";        

      }); 
    }

  } // Fim da função mostrarCampoEstamosJuntos


  /**
   * Função para adicionar um familiar
   */
  function adicionarFamiliar() {
    

    // Reset nos displays dos campos
    document.getElementById( "dadosFamiliares" ).style.display = "";    

    ++numeroDeFamiliares;
    
    let familiar = `

        <!-- Familiar ${numeroDeFamiliares} - Início -->
        <div class="mb-3" id="familiar_1">
          <div class="row mb-1">       
            <div class="col-md-5">
              <label for="nomeFamiliarInput_${numeroDeFamiliares}" class="form-label fw-bold">NOME COMPLETO</label>
            </div>              
            <div class="col-md-1">
              <label for="idadeFamiliarInput_${numeroDeFamiliares}" class="form-label fw-bold">IDADE</label>
            </div>                                                              
            <div class="col-md-2">
              <label for="parentescoFamiliarInput_${numeroDeFamiliares}" class="form-label fw-bold">PARENTESCO</label>
            </div>                                                                          
            <div class="col-md-3">
              <label for="problemasSaudeFamiliarSelect_${numeroDeFamiliares}" class="form-label fw-bold">PROBLEMAS DE SAÚDE</label>
            </div>            
          </div>    
      
          <div class="row">            
            <div class="col-md-5">
              <input type="text" class="form-control" id="nomeFamiliarInput_${numeroDeFamiliares}">
            </div>              
            <div class="col-md-1">
              <input type="text" class="form-control" id="idadeFamiliarInput_${numeroDeFamiliares}">
            </div>              
            <div class="col-md-2">
              <input type="text" class="form-control" id="parentescoFamiliarInput_${numeroDeFamiliares}">
            </div>                          
            <div class="col-md-3">          
              <select class="form-select" id="problemasSaudeFamiliarSelect_${numeroDeFamiliares}">
                <?!= gerarSelect( BUFFER_QUANTIDADE_PROBLEMAS_DE_SAUDE ); ?>
              </select>
            </div>                         
          </div>                  
        </div>        
        <!-- Familiar 1 - Fim -->    

    `;

     document.getElementById("familiares").innerHTML += familiar;


  } // Fim da função adicionarFamiliar


</script>








  